{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { DragDropContext, Draggable, Droppable } from 'react-beautiful-dnd';\nimport { v4 as uuid } from 'uuid';\nimport { useParams, useNavigate } from 'react-router-dom'; // Ensure these are imported\n\nimport AddTaskModal from '../modals/AddTaskModal';\nimport TaskModal from '../modals/TaskModal';\nimport api from '../api';\nimport toast from 'react-hot-toast';\nimport ProjectDropdown from '../navigation/ProjectDropdown';\nimport BtnPrimary from '../shared/BtnPrimary';\nimport DropdownMenu from '../navigation/DropdownMenu';\n\nfunction Task() {\n  _s();\n\n  const [isAddTaskModalOpen, setAddTaskModal] = useState(false);\n  const [columns, setColumns] = useState({});\n  const [isRenderChange, setRenderChange] = useState(false);\n  const [isTaskOpen, setTaskOpen] = useState(false);\n  const [taskId, setTaskId] = useState(null);\n  const [title, setTitle] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const {\n    projectId\n  } = useParams(); // Extract projectId from the URL\n\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (!projectId) {\n      toast.error('Project ID is missing');\n      return;\n    }\n\n    if (!isAddTaskModalOpen || isRenderChange) {\n      setIsLoading(true);\n      api.get(`/projects/${projectId}`) // Use projectId in the API request\n      .then(res => {\n        setTitle(res.data.title);\n        setColumns({\n          [uuid()]: {\n            name: \"Requested\",\n            items: res.data.tasks.filter(task => task.stage === \"Requested\").sort((a, b) => a.order - b.order)\n          },\n          [uuid()]: {\n            name: \"To do\",\n            items: res.data.tasks.filter(task => task.stage === \"To do\").sort((a, b) => a.order - b.order)\n          },\n          [uuid()]: {\n            name: \"In Progress\",\n            items: res.data.tasks.filter(task => task.stage === \"In Progress\").sort((a, b) => a.order - b.order)\n          },\n          [uuid()]: {\n            name: \"Done\",\n            items: res.data.tasks.filter(task => task.stage === \"Done\").sort((a, b) => a.order - b.order)\n          }\n        });\n        setRenderChange(false);\n      }).catch(error => {\n        var _error$response;\n\n        toast.error('Failed to fetch tasks. Please try again.');\n        console.error('Error fetching tasks:', (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n      }).finally(() => {\n        setIsLoading(false);\n      });\n    }\n  }, [projectId, isAddTaskModalOpen, isRenderChange]); // Rest of the code...\n}\n\n_s(Task, \"wClhaVxB64AR5Vic1COh9CgeKMU=\", false, function () {\n  return [useParams, useNavigate];\n});\n\n_c = Task;\nexport default Task;\n\nvar _c;\n\n$RefreshReg$(_c, \"Task\");","map":{"version":3,"names":["React","useEffect","useState","DragDropContext","Draggable","Droppable","v4","uuid","useParams","useNavigate","AddTaskModal","TaskModal","api","toast","ProjectDropdown","BtnPrimary","DropdownMenu","Task","isAddTaskModalOpen","setAddTaskModal","columns","setColumns","isRenderChange","setRenderChange","isTaskOpen","setTaskOpen","taskId","setTaskId","title","setTitle","isLoading","setIsLoading","projectId","navigate","error","get","then","res","data","name","items","tasks","filter","task","stage","sort","a","b","order","catch","console","response","finally"],"sources":["C:/Users/mehat/Desktop/PMT/frontend/src/components/projects/Task.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { DragDropContext, Draggable, Droppable } from 'react-beautiful-dnd';\nimport { v4 as uuid } from 'uuid';\nimport { useParams, useNavigate } from 'react-router-dom'; // Ensure these are imported\nimport AddTaskModal from '../modals/AddTaskModal';\nimport TaskModal from '../modals/TaskModal';\nimport api from '../api';\nimport toast from 'react-hot-toast';\nimport ProjectDropdown from '../navigation/ProjectDropdown';\nimport BtnPrimary from '../shared/BtnPrimary';\nimport DropdownMenu from '../navigation/DropdownMenu';\n\nfunction Task() {\n  const [isAddTaskModalOpen, setAddTaskModal] = useState(false);\n  const [columns, setColumns] = useState({});\n  const [isRenderChange, setRenderChange] = useState(false);\n  const [isTaskOpen, setTaskOpen] = useState(false);\n  const [taskId, setTaskId] = useState(null);\n  const [title, setTitle] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const { projectId } = useParams(); // Extract projectId from the URL\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (!projectId) {\n      toast.error('Project ID is missing');\n      return;\n    }\n\n    if (!isAddTaskModalOpen || isRenderChange) {\n      setIsLoading(true);\n      api.get(`/projects/${projectId}`) // Use projectId in the API request\n        .then((res) => {\n          setTitle(res.data.title);\n          setColumns({\n            [uuid()]: {\n              name: \"Requested\",\n              items: res.data.tasks.filter((task) => task.stage === \"Requested\").sort((a, b) => a.order - b.order)\n            },\n            [uuid()]: {\n              name: \"To do\",\n              items: res.data.tasks.filter((task) => task.stage === \"To do\").sort((a, b) => a.order - b.order)\n            },\n            [uuid()]: {\n              name: \"In Progress\",\n              items: res.data.tasks.filter((task) => task.stage === \"In Progress\").sort((a, b) => a.order - b.order)\n            },\n            [uuid()]: {\n              name: \"Done\",\n              items: res.data.tasks.filter((task) => task.stage === \"Done\").sort((a, b) => a.order - b.order)\n            }\n          });\n          setRenderChange(false);\n        })\n        .catch((error) => {\n          toast.error('Failed to fetch tasks. Please try again.');\n          console.error('Error fetching tasks:', error.response?.data);\n        })\n        .finally(() => {\n          setIsLoading(false);\n        });\n    }\n  }, [projectId, isAddTaskModalOpen, isRenderChange]);\n\n  // Rest of the code...\n}\n\nexport default Task;"],"mappings":"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"},"metadata":{},"sourceType":"module"}